<h1 id="title" class="title">Register</h1>
<div class="row">

  <div class="col-10">
    <nb-card>
      <nb-card-header>Registration Form</nb-card-header>
      <nb-card-body>
        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <div class="form-group">
            <label for="firstName" class="label">First Name</label>
            <input type="text"
                   formControlName="firstName"
                   nbInput
                   fullWidth
                   id="firstName"
                   placeholder="First Name">
            <ng-container *ngIf="registerFormControl.firstName.invalid && registerFormControl.firstName.touched">
              <p class="caption status-danger" *ngIf="registerFormControl.firstName.errors?.required">
                Full name is required!
              </p>
              <p class="caption status-danger" *ngIf="registerFormControl.firstName.errors?.minlength || registerFormControl.firstName.errors?.maxlength">
                First name should contains
                from 2
                to 50
                characters
              </p>
            </ng-container>
          </div>
          <div class="form-group">
            <label for="middleName" class="label">Middle Name</label>
            <input type="text" nbInput fullWidth formControlName="middleName" id="middleName" placeholder="Middle Name">
          </div>
          <div class="form-group">
            <label for="lastName" class="label">Last Name</label>
            <input type="text" nbInput fullWidth formControlName="lastName" id="lastName" placeholder="Last Name">
          </div>
          <div class="form-group">
            <label for="email" class="label">Email</label>
            <input type="email" nbInput fullWidth formControlName="email" id="email" placeholder="Email">
          </div>
          <div class="form-group">
            <label class="label" for="password">Password</label>
            <input nbInput
                   type="password"
                   id="password"
                   name="password"
                   fullWidth>
            <ng-container *ngIf="registerFormControl.password.invalid && registerFormControl.password.touched">
              <p class="caption status-danger" *ngIf="registerFormControl.password.errors?.required">
                Password is required!
              </p>
              <p class="caption status-danger" *ngIf="registerFormControl.password.errors?.minlength || registerFormControl.password.errors?.maxlength">
                Password should contain
                from 6
                to 20
                characters
              </p>
            </ng-container>
          </div>

          <div class="form-group">
            <label class="label" for="confirmPassword">Repeat password</label>
            <input nbInput
                   type="password"
                   id="confirmPassword"
                   name="confirmPassword"
                   fullWidth>
            <ng-container *ngIf="registerFormControl.password.invalid && registerFormControl.password.touched">
              <p class="caption status-danger" *ngIf="registerFormControl.password.errors?.required">
                Password is required!
              </p>
              <p class="caption status-danger" *ngIf="registerFormControl.password.errors?.minlength || registerFormControl.password.errors?.maxlength">
                Password should contain
                from 6
                to 20
                characters
              </p>
            </ng-container>
<!--            <span class="text-danger"-->
<!--                  *ngIf="(registerFormControl.confirmPassword.touched || submitted)&& registerFormControl.confirmPassword.errors?.required">-->
<!--                                Confirm Password is required-->
<!--                            </span>-->
<!--            <span class="text-danger"-->
<!--                  *ngIf="registerFormControl.confirmPassword.touched && registerFormControl.confirmPassword.errors?.passwordMismatch">-->
<!--                                Passwords does not match-->
<!--                            </span>-->
          </div>
          <div class="form-group">
            <label for="county" class="label">User Type</label>
            <nb-select id="userType" formControlName="userType">
              <nb-option fullWidth *ngFor="let user of userType" [value]="user.key">
                <ng-container *ngIf="user.key != 'ADMIN' || 'USER'">
                  {{ user.value | titlecase }}
                </ng-container>

              </nb-option>
            </nb-select>
          </div>
          <div class="form-group">
            <label for="photo" class="label">Photo </label>
            <input type="file" nbInput fullWidth formControlName="photo" id="photo"  (change)="selectFile($event, 'photo')">
          </div>
<!--          Use email instead-->
          <div class="form-group">
            <label for="userName" class="label">User Name</label>
            <input type="text" formControlName="username" nbInput fullWidth id="userName" placeholder="User Name">
          </div>
          <div class="form-group">
            <label class="label">Gender</label>
            <div>
              <nb-radio-group id="gender" fullWidth formControlName="gender" *ngFor="let value of gender">
                <nb-radio value="{{value.key}}">{{value.value}}</nb-radio>
              </nb-radio-group>
            </div>
          </div>
          <div class="form-group">
            <label for="telephone" class="label">Telephone Number</label>
            <input type="text" nbInput fullWidth formControlName="telephone" id="telephone" placeholder="+2547...">
          </div>
          <div class="form-group">
            <input nbInput
                   formControlName="dateOfBirth"
                   placeholder="Date of Birth"
                   fullWidth
                   [nbDatepicker]="formPicker">
            <nb-datepicker #formPicker></nb-datepicker>
          </div>
          <form formGroupName="addressForm">
            <div class="form-group">
              <label for="address" class="label">Address</label>
              <textarea formControlName="address1" rows="5" nbInput fullWidth id="address" shape="semi-round"></textarea>
            </div>
            <div class="form-group">
              <label for="country" class="label">Country</label>
              <nb-select fullWidth id="country" formControlName="country" [(ngModel)]="selectedCountry">
                <nb-option  *ngFor="let country of countries" [value]="country.id">
                  {{country.name}}
                </nb-option>
              </nb-select>
            </div>
            <div class="form-group" *ngIf="selectedCountry === 110">
              <label for="county" class="label">County</label>
              <nb-select id="county" formControlName="county">
                <nb-option fullWidth *ngFor="let county of counties" [value]="county.id">
                  {{county.name}}
                </nb-option>
              </nb-select>
            </div>
            <div class="form-group">
              <label for="postalCode" class="label">Postal Code</label>
              <textarea formControlName="postalCode" rows="3"  shape="semi-round" nbInput fullWidth id="postalCode"></textarea>
            </div>
            <div class="form-group">
              <label for="zipCode" class="label">Zip Code</label>
              <input type="text" nbInput fullWidth id="zipCode">
            </div>
          </form>



          <div class="form-group">
            <nb-checkbox>Check me out</nb-checkbox>
          </div>
          <button type="submit" nbButton status="danger">Submit</button>
        </form>
        <button class="btn-dark" (click)="populateWithDummy()" >Populate</button>
      </nb-card-body>
    </nb-card>
  </div>
</div>

